# Backend для приложения с объявлениями

## Описание

Этот проект представляет собой бэкенд для мобильного приложения, которое позволяет:
- Создавать и просматривать объявления.
- Фильтровать объявления по дате и статусу.

### Основной функционал

1. **Создание объявлений**:
   - Создавать объявления могут только авторизованные пользователи.
   - У одного пользователя может быть не больше 10 объявлений со статусом `OPEN`.

2. **Просмотр объявлений**:
   - Для просмотра объявлений авторизация не требуется.
   - Фильтрация по:
     - Дате создания (с использованием `DateFromToRangeFilter`),
     - Статусу (`OPEN` или `CLOSED`).

3. **Редактирование и удаление**:
   - Редактировать и удалять объявления может только автор.

4. **Ограничение запросов**:
   - Для неавторизованных пользователей: максимум 10 запросов в минуту.
   - Для авторизованных пользователей: максимум 20 запросов в минуту.

---

## Установка и запуск проекта

### 1. Установка зависимостей

Склонируйте репозиторий и установите зависимости:

```bash
pip install -r requirements.txt
```

### 2. Настройка базы данных

Проект использует PostgreSQL в качестве базы данных. Создайте новую базу данных:

```sql
CREATE DATABASE ads_app;
```

Настройте подключение к базе данных в файле settings.py:

```python
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'ads_app',
        'USER': 'ваш_пользователь',
        'PASSWORD': 'ваш_пароль',
        'HOST': 'localhost',
        'PORT': '5432',
    }
}
```

Примените миграции:

```bash
python manage.py makemigrations
python manage.py migrate
```

### 3. Запуск сервера разработки

Для запуска проекта выполните:

```bash
python manage.py runserver
```

Сервер будет доступен по адресу: http://127.0.0.1:8000/

## Аутентификация и использование токенов

Для работы с API необходимо использовать токены для аутентификации. Токены создаются через админку:

1. Создайте пользователя через админку по адресу http://127.0.0.1:8000/admin/.

2. Создайте токен для пользователя:
   - В админке выберите Tokens (или раздел authtoken).
   - Создайте токен для нужного пользователя.
     
3. Используйте токен в запросах, передавая его в заголовке:
   
```http
Authorization: Token <ваш_токен>
```
## Документация API

### Эндпоинты

- GET /api/advertisements/ — Просмотр всех объявлений.
- POST /api/advertisements/ — Создание нового объявления (только для авторизованных пользователей).
- PATCH /api/advertisements/{id}/ — Обновление объявления (только для автора).
- DELETE /api/advertisements/{id}/ — Удаление объявления (только для автора).
  
### Фильтрация

Фильтрация объявлений по дате:

```bash
/api/advertisements/?created_at_after=YYYY-MM-DD&created_at_before=YYYY-MM-DD
```

Фильтрация по статусу:

```bash
/api/advertisements/?status=OPEN
```

### Лимиты запросов

- Неавторизованные пользователи: максимум 10 запросов в минуту.
- Авторизованные пользователи: максимум 20 запросов в минуту.

### Технологии

- Django — веб-фреймворк для разработки.
- Django REST Framework — для создания REST API.
- PostgreSQL — база данных.
- Django Rest Framework Authtoken — для управления токенами аутентификации.
